<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.MemberMapper">

    <resultMap id="memberResultMap" type="dto.MemberDTO">
        <result property="member_serialNum" column="MEMBER_SERIALNUM"/>
        <result property="member_id"       column="MEMBER_ID"/>
        <result property="member_pw"       column="MEMBER_PW"/>
        <result property="member_email"    column="MEMBER_EMAIL"/>
        <result property="member_name"     column="MEMBER_NAME"/>
        <result property="member_phone"    column="MEMBER_PHONE"/>
    </resultMap>

    
    <select id="memberLogin" parameterType="dto.MemberDTO" resultMap="memberResultMap">
    SELECT *
      FROM MEMBER_INFO
     WHERE TRIM(MEMBER_ID) = #{member_id}
       AND MEMBER_PW        = #{member_pw}
    </select>

    
    <select id="selectById" parameterType="String" resultType="int">
        SELECT COUNT(*)
          FROM MEMBER_INFO
         WHERE TRIM(MEMBER_ID) = #{memberId}
    </select>

    
    <insert id="insertMember" parameterType="dto.MemberDTO">
        INSERT INTO MEMBER_INFO
        (MEMBER_ID, MEMBER_PW, MEMBER_EMAIL, MEMBER_NAME, MEMBER_PHONE)
        VALUES
        (#{member_id}, #{member_pw}, #{member_email}, #{member_name}, #{member_phone})
    </insert>

    
<select id="findId" parameterType="dto.MemberDTO" resultType="java.lang.String">
    SELECT MEMBER_ID
      FROM MEMBER_INFO
     WHERE TRIM(MEMBER_NAME) = TRIM(#{member_name})
       AND TRIM(MEMBER_EMAIL) = TRIM(#{member_email})
</select>


    
    <select id="countByIdEmail" parameterType="dto.MemberDTO" resultType="int">
        SELECT COUNT(*)
          FROM MEMBER_INFO
         WHERE MEMBER_ID    = #{member_id}
           AND MEMBER_EMAIL = #{member_email}
    </select>

    
    <update id="updatePassword" parameterType="dto.MemberDTO">
        UPDATE MEMBER_INFO
           SET MEMBER_PW = #{member_pw}
         WHERE MEMBER_ID    = #{member_id}
           AND MEMBER_EMAIL = #{member_email}
    </update>

</mapper>


